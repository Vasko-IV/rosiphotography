$function(){$.widget("od.mSlide",{options:{slideMarginLeft:50,change:null},_create:function(){var b=this.element;var a=this;if(typeof b[0].addEventListener=="function"){b[0].addEventListener("touchstart",this._touchHandler,false);b[0].addEventListener("touchmove",this._touchHandler,false);b[0].addEventListener("touchend",this._touchHandler,false);b[0].addEventListener("touchcancel",this._touchHandler,false)}b.data("allSlidesWidth",0).css({position:"relative",overflow:"hidden"});b.find("div.slide").each(function(){$(this).css("float","left").data({pos_x:b.data("allSlidesWidth"),slide_num:$(this).prevAll(".slide").size()});b.data("allSlidesWidth",b.data("allSlidesWidth")+$(this).width())});b.wrapInner($('<div class="mSlide_innerWrap" />').css("width",b.data("allSlidesWidth")));b.append($('<div class="mSlide_btnLeft" />').hide());b.append($('<div class="mSlide_btnRight" />'));i=b.find(".mSlide_innerWrap");b.find(".mSlide_btnRight").click(function(){a.slideNext()});b.find(".mSlide_btnLeft").click(function(){a.slidePrev()});i.draggable({axis:"x",cursor:"pointer",scroll:true,stop:function(c,d){if($(this).position().left>0){$(this).animate({left:0},500,"easeOutBounce",function(){a._refresh(true)})}else{if(b.width()>(i.width()+i.position().left)){$(this).animate({left:(i.width()-b.width())*-1},500,"easeOutBounce",function(){a._refresh(true)})}else{a._refresh(true)}}}});this._refresh(false)},_touchHandler:function(c){var d=c.changedTouches;var e=d[0];var a="";switch(c.type){case"touchstart":a="mousedown";break;case"touchmove":a="mousemove";c.preventDefault();break;case"touchend":a="mouseup";break;default:return}var b=document.createEvent("MouseEvent");b.initMouseEvent(a,true,true,window,1,e.screenX,e.screenY,e.clientX,e.clientY,false,false,false,false,0,null);e.target.dispatchEvent(b)},slideTo:function(c){var d=this.element;var b=d.find(".mSlide_innerWrap");var a=this;switch(c){case"first":c=0;break;case"last":c=d.find("div.slide").size()-1;break}d.find("div.slide").each(function(){if($(this).data("slide_num")==c){if((b.width()-($(this).data("pos_x")))>d.width()){var e=$(this).data("pos_x")*-1+a.options.slideMarginLeft}else{var e=-1*(b.width()-d.width())}b.animate({left:((e>0)?0:e)},500,null,function(){a._refresh()});return false}})},slideNext:function(){var d=this.element;var c=d.find(".mSlide_innerWrap");var b=this;var a=-1*c.position().left;d.find("div.slide").each(function(){if(($(this).data("pos_x"))>a+b.options.slideMarginLeft){if((c.width()-($(this).data("pos_x")))>d.width()){var e=-1*($(this).data("pos_x")-b.options.slideMarginLeft)}else{var e=-1*(c.width()-d.width())}c.animate({left:e},500,null,function(){b._refresh(true)});return false}})},slidePrev:function(){var d=this.element;var c=d.find(".mSlide_innerWrap");var b=this;var a=-1*c.position().left;d.find("div.slide").each(function(){if(a<=$(this).data("pos_x")){var e=-1*($(this).prev(".slide").data("pos_x")-b.options.slideMarginLeft);c.animate({left:((e>0)?0:e)},500,null,function(){b._refresh(true)});return false}})},_refresh:function(b){var d=this.element;var c=d.find(".mSlide_innerWrap");var a=c.position().left;if(a>=0){d.find(".mSlide_btnLeft").fadeOut()}else{d.find(".mSlide_btnLeft").fadeIn()}if(d.width()>=c.width()+a){d.find(".mSlide_btnRight").fadeOut()}else{d.find(".mSlide_btnRight").fadeIn()}if(b){this._trigger("change",null,-1*a)}},_destroy:function(){},_setOptions:function(){$.Widget.prototype._setOptions.apply(this,arguments);this._refresh(true)},_setOption:function(a,b){$.Widget.prototype._setOption.call(this,a,b);this._refresh(true)}})});